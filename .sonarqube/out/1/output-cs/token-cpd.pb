ø
tC:\Users\rafap\source\repos\ClasesDavid\ActividadFinal\Peliculas.API\Peliculas.Application\DTOs\ImagenPeliculaDTO.cs
	namespace 	
	Peliculas
 
. 
Application 
.  
DTOs  $
{ 
public 

class 
ImagenPeliculaDTO "
{ 
public		 
Guid		 

PeliculaId		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
public

 
byte

 
[

 
]

 
ImagenBase64

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}( )
public 
string 
	Extension 
{  !
get" %
;% &
set' *
;* +
}+ ,
} 
} Ï'
yC:\Users\rafap\source\repos\ClasesDavid\ActividadFinal\Peliculas.API\Peliculas.Application\Implementations\CrudService.cs
	namespace 	
	Peliculas
 
. 
Application 
.  
Implementations  /
{		 
public

 

class

 
CrudService

 
<

 
TEntity

 $
,

$ %
TId

% (
>

( )
:

* +
ICrudService

, 8
<

8 9
TEntity

9 @
,

@ A
TId

A D
>

D E
where 
TEntity 
: 
Entity 
< 
TId "
>" #
,# $
new% (
(( )
)) *
where 
TId 
: 
IComparable 
,  
IComparable! ,
<, -
TId- 0
>0 1
{ 
public 
IRepository 
< 
TEntity "
," #
TId# &
>& '
_repository( 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
CrudService 
( 
IRepository &
<& '
TEntity' .
,. /
TId/ 2
>2 3

repository4 >
)> ?
=>@ B
_repositoryC N
=O P

repositoryQ [
;[ \
public 
TEntity 
Add 
( 
TEntity "
entity# )
)) *
{ 	
entity 
. 
Id 
= 
GetId 
( 
) 
;  
return 
_repository 
. 
Add "
(" #
entity# )
)) *
;* +
} 	
public 
TEntity 
Delete 
( 
TId !
id" $
)$ %
{ 	
return 
_repository 
. 
Delete %
(% &
id& (
)( )
;) *
} 	
public 
List 
< 
TEntity 
> 
GetAll #
(# $
)$ %
{ 	
return 
_repository 
. 
GetAll %
(% &
)& '
;' (
} 	
public!! 
TEntity!! 
GetById!! 
(!! 
TId!! "
id!!# %
)!!% &
{"" 	
return## 
_repository## 
.## 
GetById## &
(##& '
id##' )
)##) *
;##* +
}$$ 	
public&& 
List&& 
<&& 
TEntity&& 
>&& 
GetByFilter&& (
(&&( )
Func&&) -
<&&- .
TEntity&&. 5
,&&5 6
bool&&7 ;
>&&; <
	predicate&&= F
)&&F G
{'' 	
return(( 
_repository(( 
.(( 
GetByFilter(( *
(((* +
	predicate((+ 4
)((4 5
;((5 6
})) 	
public** 
TEntity** 
Update** 
(** 
TEntity** %
entity**& ,
)**, -
{++ 	
return,, 
_repository,, 
.,, 
Update,, %
(,,% &
entity,,& ,
),,, -
;,,- .
}-- 	
private.. 
TId.. 
GetId.. 
(.. 
).. 
{// 	
TId00 
id00 
;00 
var11 
type11 
=11 
typeof11 
(11 
TId11 !
)11! "
;11" #
if22 
(22 
type22 
==22 
typeof22 
(22 
Guid22 #
)22# $
)22$ %
id33 
=33 
(33 
TId33 
)33 
(33 
IComparable33 &
)33& '
Guid33' +
.33+ ,
NewGuid33, 3
(333 4
)334 5
;335 6
else44 
if44 
(44 
type44 
==44 
typeof44 #
(44# $
string44$ *
)44* +
)44+ ,
id55 
=55 
(55 
TId55 
)55 
(55 
IComparable55 &
)55& '
Guid55' +
.55+ ,
NewGuid55, 3
(553 4
)554 5
.555 6
ToString556 >
(55> ?
)55? @
;55@ A
else66 
id77 
=77 
(77 
TId77 
)77 
(77 
IComparable77 &
)77& '
(77' (
new77( +
Random77, 2
(772 3
)773 4
)774 5
.775 6
Next776 :
(77: ;
)77; <
;77< =
return88 
id88 
;88 
}99 	
}:: 
};; ã
ƒC:\Users\rafap\source\repos\ClasesDavid\ActividadFinal\Peliculas.API\Peliculas.Application\Implementations\ImagenPeliculaService.cs
	namespace 	
	Peliculas
 
. 
Application 
.  
Implementations  /
{ 
public 

class !
ImagenPeliculaService &
:' ("
IImagenPeliculaService) ?
{ 
private 
readonly 
IAlmacenarArchivos +
_almacenarArchivos, >
;> ?
private 
readonly 
IRepository $
<$ %
ImagenPelicula% 3
,3 4
Guid4 8
>8 9
_repository: E
;E F
private 
const 
string 
_contenedor (
=) *
$str+ >
;> ?
public !
ImagenPeliculaService $
($ %
IAlmacenarArchivos% 7
almacenarArchivos8 I
,I J
IRepositoryK V
<V W
ImagenPeliculaW e
,e f
Guidf j
>j k

repositoryl v
)v w
{ 	
_almacenarArchivos 
=  
almacenarArchivos! 2
;2 3
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
< 
ImagenPelicula (
>( )
Add* -
(- .
ImagenPeliculaDTO. ?
imagenPeliculaDTO@ Q
)Q R
{ 	
var 
ruta 
= 
await 
_almacenarArchivos /
. 
GuardarArchivo 
(  
imagenPeliculaDTO  1
.1 2
ImagenBase642 >
,> ?
imagenPeliculaDTO !
.! "
	Extension" +
,+ ,
_contenedor 
) 
; 
var   
entity   
=   
new   
ImagenPelicula   +
(  + ,
)  , -
{!! 
Path"" 
="" 
ruta"" 
,"" 
Nombre## 
=## 
imagenPeliculaDTO## *
.##* +
Nombre##+ 1
,##1 2

PeliculaId$$ 
=$$ 
imagenPeliculaDTO$$ .
.$$. /

PeliculaId$$/ 9
}%% 
;%% 
return'' 
_repository'' 
.'' 
Add'' "
(''" #
entity''# )
)'') *
;''* +
}(( 	
public** 
List** 
<** 
ImagenPelicula** "
>**" #
GetByPeliculaId**$ 3
(**3 4
Guid**4 8
Id**9 ;
)**; <
{++ 	
return,, 
_repository,, 
.,, 
GetByFilter,, *
(,,* +
x,,+ ,
=>,,- /
x,,0 1
.,,1 2

PeliculaId,,2 <
==,,= ?
Id,,@ B
),,B C
;,,C D
}-- 	
public// 
async// 
Task// 
Delete//  
(//  !
Guid//! %
Id//& (
)//( )
{00 	
var11 
entity11 
=11 
_repository11 $
.11$ %
GetById11% ,
(11, -
Id11- /
)11/ 0
;110 1
await22 
_almacenarArchivos22 $
.22$ %
EliminarArchivo22% 4
(224 5
entity225 ;
.22; <
Path22< @
,22@ A
_contenedor22B M
)22M N
;22N O
_repository33 
.33 
Delete33 
(33 
Id33 !
)33! "
;33" #
}44 	
}55 
}66 
uC:\Users\rafap\source\repos\ClasesDavid\ActividadFinal\Peliculas.API\Peliculas.Application\Interfaces\ICrudService.cs
	namespace 	
	Peliculas
 
. 
Application 
.  

Interfaces  *
{ 
public 

	interface 
ICrudService !
<! "
TEntity" )
,) *
TId* -
>- .
where		 
TEntity		 
:		 
Entity		 
<		 
TId		 "
>		" #
,		# $
new		% (
(		( )
)		) *
where

 
TId

 
:

 
IComparable

 
,

  
IComparable

! ,
<

, -
TId

- 0
>

0 1
{ 
public 
TEntity 
GetById 
( 
TId "
id# %
)% &
;& '
public 
List 
< 
TEntity 
> 
GetAll #
(# $
)$ %
;% &
public 
List 
< 
TEntity 
> 
GetByFilter (
(( )
Func) -
<- .
TEntity. 5
,5 6
bool7 ;
>; <
	predicate= F
)F G
;G H
public 
TEntity 
Add 
( 
TEntity "
entity# )
)) *
;* +
public 
TEntity 
Update 
( 
TEntity %
entity& ,
), -
;- .
public 
TEntity 
Delete 
( 
TId !
id" $
)$ %
;% &
} 
} ´
C:\Users\rafap\source\repos\ClasesDavid\ActividadFinal\Peliculas.API\Peliculas.Application\Interfaces\IImagenPeliculaService.cs
	namespace 	
	Peliculas
 
. 
Application 
.  

Interfaces  *
{		 
public

 

	interface

 "
IImagenPeliculaService

 +
{ 
public 
Task 
< 
ImagenPelicula "
>" #
Add$ '
(' (
ImagenPeliculaDTO( 9
imagenPeliculaDTO: K
)K L
;L M
public 
List 
< 
ImagenPelicula "
>" #
GetByPeliculaId$ 3
(3 4
Guid4 8
Id9 ;
); <
;< =
public 
Task 
Delete 
( 
Guid 
Id  "
)" #
;# $
} 
} ¸
pC:\Users\rafap\source\repos\ClasesDavid\ActividadFinal\Peliculas.API\Peliculas.Application\Utils\AppVariables.cs
	namespace 	
	Peliculas
 
. 
Application 
.  
Utils  %
{ 
public 

static 
class 
AppVariables $
{ 
public		 
static		 
string		 
RootPath		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
=		4 5
$str		6 8
;		8 9
public

 
static

 
string

 
WebRootPath

 (
{

) *
get

+ .
;

. /
set

0 3
;

3 4
}

5 6
=

7 8
$str

9 ;
;

; <
} 
} 